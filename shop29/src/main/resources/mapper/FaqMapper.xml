<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.toy2.shop29.Board.Faq.dao.FaqMapper">

    <!-- Faq의 총 개수를 조회하는 쿼리 -->
    <select id="count" resultType="int">
        select count(*) from Faq
    </select>

    <!-- 특정 Faq를 조회하는 쿼리 -->
    <select id="select" parameterType="int" resultType="com.toy2.shop29.Board.Faq.domain.FaqDto">
        select faq_id,
               faq_type_id,
               faq_title,
               faq_content,
               faq_creator_id,
               faq_modifier_id,
               faq_creation_time,
               faq_modification_time,
               faq_view_count
        from Faq
        where faq_id = #{faqId}
    </select>

    <!-- 모든 Faq를 조회하는 쿼리 -->
    <select id="selectAll" resultType="com.toy2.shop29.Board.Faq.domain.FaqDto">
        select faq_id,
               faq_type_id,
               faq_title,
               faq_content,
               faq_creator_id,
               faq_modifier_id,
               faq_creation_time,
               faq_modification_time,
               faq_view_count
        from Faq
        order by faq_creation_time desc, faq_id desc
    </select>

    <!-- 페이지네이션을 적용하여 Faq를 조회하는 쿼리 -->
    <select id="selectPage" parameterType="map" resultType="com.toy2.shop29.Board.Faq.domain.FaqDto">
        SELECT faq_id,
               faq_type_id,
               faq_title,
               faq_content,
               faq_creator_id,
               faq_modifier_id,
               faq_creation_time,
               faq_modification_time,
               faq_view_count
        FROM Faq
        ORDER BY faq_id DESC, faq_creation_time DESC
            LIMIT #{offset}, #{pageSize}
    </select>

    <!-- Faq를 삽입하는 쿼리 -->
    <insert id="insert" parameterType="com.toy2.shop29.Board.Faq.domain.FaqDto">
        insert into Faq (faq_title, faq_content, faq_creator_id, faq_creation_time)
        values (#{faqTitle}, #{faqContent}, #{faqCreatorId}, NOW())
    </insert>

    <!-- 모든 Faq를 삭제하는 쿼리 -->
    <delete id="deleteAll">
        delete from Faq
    </delete>

    <!-- 특정 Faq를 삭제하는 쿼리 -->
    <delete id="delete" parameterType="map">
        delete from Faq
        where faq_id = #{faqId} and faq_creator_id = #{faqCreatorId}
    </delete>

    <!-- Faq를 업데이트하는 쿼리 -->
    <update id="update" parameterType="com.toy2.shop29.Board.Faq.domain.FaqDto">
        update Faq
        set faq_title = #{faqTitle},
            faq_content = #{faqContent},
            faq_modification_time = now()
        where faq_id = #{faqId}
    </update>

</mapper>
