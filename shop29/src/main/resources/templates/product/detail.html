<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <title>Product Board</title>

    <!-- Bootstrap CSS 추가 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

    <!-- 사용자 정의 스타일 추가 -->
    <style>
        .navbar-brand {
            font-size: 1.5rem;
            font-weight: bold;
            color: #ffffff !important;
        }
        .navbar {
            background-color: #343a40;
        }
        .nav-link {
            color: #ffffff !important;
        }
        .nav-link.active {
            font-weight: bold;
        }
        .nav-link:hover {
            color: #d4d4d4 !important;
        }
        .btn-outline-success {
            color: #ffffff;
            border-color: #ffffff;
        }
        .btn-outline-success:hover {
            background-color: #ffffff;
            color: #343a40;
        }
    </style>
</head>



<body>
<!-- Navigation -->
<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
    <div class="container-fluid">
        <a class="navbar-brand" href="/" th:text="'29CM'">29cm</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent"
                aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                <li class="nav-item">
                    <a class="nav-link active" aria-current="page" href="product/list" th:text="'상품'">상품</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link active" href="/cart" th:text="'장바구니'"></a>
                </li>
                <li class="nav-item">
                    <a class="nav-link active" href="/order" th:text="'주문'"></a>
                </li>
                <li class="nav-item">
                    <a class="nav-link active" href="/qna/qna-list" th:text="'1:1 문의'">1:1 문의</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link active" href="/board/list" th:text="'공지사항'">공지사항</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link active" href="/user/signup" th:text="'회원가입'">회원가입</a>
                </li>
            </ul>
            <form class="d-flex">
                <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search">
                <button class="btn btn-outline-success" type="submit">Search</button>
            </form>
        </div>
    </div>
</nav>


<!-- 카테고리 링크들 -->
<p>대분류: <a th:href="@{/product/list(middleCategoryId=${product.middleCategoryId},smallCategoryId=${product.smallCategoryId})}" th:text="${product.majorCategoryName}"></a></p>
<p>중분류: <a th:href="@{/product/list(middleCategoryId=${product.middleCategoryId},smallCategoryId=${product.smallCategoryId})}" th:text="${product.middleCategoryName}"></a></p>
<p>소분류: <a th:href="@{/product/list(middleCategoryId=${product.middleCategoryId},smallCategoryId=${product.smallCategoryId})}" th:text="${product.smallCategoryName}"></a></p>


<!-- 제품 상세 정보 -->
<p>브랜드: <span th:text="${product.brandName}">브랜드</span></p>
<h1 th:text="${product.productName}">상품 이름</h1>
<p>별점: <span th:text="${product.rating}">별점</span></p>
<p>할인율: <span th:text="${product.saleRatio}">할인율</span></p>
<p>정가: <span th:text="${product.price}">정가</span></p>
<p>할인가: <span th:text="${(product.price * (1 - product.saleRatio / 100)).intValue() - ((product.price * (1 - product.saleRatio / 100)).intValue() % 100)}">할인가</span></p>
<p>상품 사이즈 측정 표: <span th:text="${product.sizeTable != null ? product.sizeTable : ''}">상품 사이즈 측정 표</span></p>







 <!-- 옵션 키와 해당 옵션 값들 나열 -->
<div th:each="option : ${productOptions}">
    <!-- 옵션 키 이름을 표시하는 영역 -->
    <h3 th:text="${option.optionKeyName}">옵션 키 이름</h3>

    <!-- 옵션 값들을 나열하는 영역 -->
    <ul>
        <li th:each="value : ${productOptionValues}" th:if="${value.optionKeyId == option.optionKeyId}">
            <input type="radio" th:name="'option_' + ${value.optionKeyId}" th:value="${value.optionValueId}" th:id="'optionValue_' + ${value.optionValueId}" />
            <label th:for="'optionValue_' + ${value.optionValueId}" th:text="${value.optionValueName}"></label>
            <span th:text="'추가 비용: ' + ${value.extraFee}"></span>
            <span th:text="'재고: ' + ${value.stock}"></span>
        </li>
    </ul>
</div>










<!--&lt;!&ndash; 장바구니 버튼 &ndash;&gt;-->
<!--<form action="/cart/add" method="post">-->
<!--    <input type="hidden" name="productId" th:value="${product.productId}" />-->
<!--    <button type="submit">장바구니</button>-->
<!--</form>-->

<!--&lt;!&ndash; 결제 버튼 &ndash;&gt;-->
<!--<form action="/checkout" method="post">-->
<!--    <input type="hidden" name="productId" th:value="${product.productId}" />-->
<!--    <button type="submit">구매</button>-->
<!--</form>-->

<!-- 장바구니 버튼 -->
<form id="cartForm" action="/cart/add" method="post">
    <input type="hidden" name="productId" th:value="${product.productId}" />
    <div id="selectedOptions"></div>
    <input type="number" name="quantity" min="1" value="1" />
    <button type="button" onclick="submitCartForm()">장바구니</button>
</form>

<script>
    function submitCartForm() {
        const selectedOptionsDiv = document.getElementById("selectedOptions");
        selectedOptionsDiv.innerHTML = '';

        const optionRadios = document.querySelectorAll('input[type="radio"]:checked');

        optionRadios.forEach(function(radio) {
            const input = document.createElement("input");
            input.type = "hidden";
            input.name = "selectedOptionValueIds";
            input.value = radio.value;
            selectedOptionsDiv.appendChild(input);
        });

        document.getElementById("cartForm").submit();
    }
</script>


</body>
</html>






