<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>FAQ 목록</title>
    <link rel="stylesheet" href="/css/main.css">
    <style>
        /* 기본 스타일 초기화 및 폰트 설정 */
        body {
            font-family: 'Noto Sans', sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f7f9fc;
            color: #333;
        }
        h1 {
            font-size: 2rem;
            color: #333;
            text-align: center;
            margin: 20px 0;
        }
        .container {
            width: 90%;
            max-width: 1000px;
            margin: 0 auto;
            background-color: #fff;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            padding: 20px;
            border-radius: 8px;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        th, td {
            padding: 12px 15px;
            border-bottom: 1px solid #eee;
        }
        th {
            background-color: #007bff;
            color: white;
            font-weight: bold;
            text-align: center;
        }
        td {
            text-align: center;
        }
        td.title {
            text-align: left;
        }
        td a {
            color: #007bff;
            text-decoration: none;
            transition: color 0.2s ease-in;
        }
        td a:hover {
            color: #0056b3;
        }
        .footer {
            text-align: center;
            margin-top: 20px;
        }
        .footer .button {
            display: inline-block;
            background-color: #007bff;
            color: #fff;
            padding: 10px 20px;
            margin: 10px 5px;
            text-decoration: none;
            border-radius: 4px;
            transition: background-color 0.3s ease-in-out;
        }
        .footer .button:hover {
            background-color: #0056b3;
        }

        /* 페이지네이션 */
        .pagination {
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 20px 0;
        }
        .pagination a, .pagination span {
            margin: 0 5px;
            padding: 10px 15px;
            border-radius: 30px;
            border: 1px solid #ddd;
            background-color: #fff;
            color: #007bff;
            text-decoration: none;
            transition: all 0.2s ease-in-out;
        }
        .pagination a:hover {
            background-color: #007bff;
            color: white;
            box-shadow: 0 4px 12px rgba(0, 123, 255, 0.2);
        }
        .pagination span.current-page {
            background-color: #007bff;
            color: white;
            border-color: #007bff;
        }

        /* 버튼 위치 조정 */
        .footer-buttons {
            display: flex;
            justify-content: space-between;
            margin: 20px 0;
        }

        /* 검색 폼을 테이블 왼쪽 위에 위치시킴 */
        .search-wrapper {
            display: flex;
            justify-content: flex-start;
            align-items: center;
            margin-bottom: 10px;
        }

        .search-form {
            display: inline-flex;
            align-items: center;
            gap: 10px;
        }

        .search-input {
            padding: 8px;
            border: 1px solid #ccc;
            border-radius: 4px;
            font-size: 1rem;
            width: 250px;
        }

        .search-button {
            padding: 8px 16px;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.3s ease-in-out;
        }

        .search-button:hover {
            background-color: #0056b3;
        }
    </style>
</head>
<body>
<div class="container">
    <h1>FAQ 목록</h1>

    <!-- 검색 폼 및 색인 옵션을 테이블 위로 위치 -->
    <div class="search-wrapper">
        <form action="/faq/list" method="get" class="search-form">
            <select class="search-option" name="option">
                <option value="A" th:selected="${option == 'A'}">제목+내용</option>
                <option value="T" th:selected="${option == 'T'}">제목만</option>
                <option value="W" th:selected="${option == 'W'}">작성자</option>
            </select>
            <input type="text" name="keyword" class="search-input" placeholder="검색어를 입력하세요" th:value="${keyword != null ? keyword : ''}">

            <input type="submit" class="search-button" value="검색">
        </form>
    </div>

    <table>
        <thead>
        <tr>
            <th>번호</th>
            <th>구분</th>
            <th>제목</th>
            <th>작성자</th>
            <th>작성일시</th>
        </tr>
        </thead>
        <tbody>
        <!-- FAQ 항목 출력 -->
        <tr th:each="faq, iterStat : ${list}">
            <!-- 번호 계산: 총 항목 수 - (현재 페이지 - 1) * 페이지 크기 - 현재 항목 인덱스 -->
            <td th:text="${(totalCnt != null ? totalCnt : 0) - (((page != null && page.currentPage != null) ? page.currentPage : 1) - 1) * (pageSize != null ? pageSize : 10) - iterStat.index}"></td>
            <td th:text="${faq.faqTypeId}"></td>
            <td class="title">
                <a th:href="@{/faq/read(faqId=${faq.faqId})}" th:text="${faq.faqTitle}"></a>
            </td>
            <td th:text="${faq.faqCreatorId}"></td>
            <td th:text="${#dates.format(faq.faqCreationTime, 'yyyy-MM-dd HH:mm:ss')}"></td>
        </tr>
        </tbody>
    </table>

    <!-- 페이지네이션 -->
    <div class="pagination">
        <!-- 이전 페이지 링크 -->
        <span th:if="${page.currentPage != null && page.currentPage > 1}">
            <a th:href="@{/faq/list(currentPage=${page.currentPage - 1}, searchQuery=${searchQuery})}">이전</a>
        </span>

        <!-- 페이지 번호 링크 -->
        <span th:each="i : ${#numbers.sequence(1, page.totalPages != null ? page.totalPages : 1)}"
              th:classappend="${i == page.currentPage ? 'current-page' : ''}">
            <a th:href="@{/faq/list(currentPage=${i}, searchQuery=${searchQuery})}" th:text="${i}"></a>
        </span>

        <!-- 다음 페이지 링크 -->
        <span th:if="${page.currentPage != null && page.currentPage < page.totalPages}">
            <a th:href="@{/faq/list(currentPage=${page.currentPage + 1}, searchQuery=${searchQuery})}">다음</a>
        </span>
    </div>

    <!-- 버튼 위치 조정 -->
    <div class="footer-buttons">
        <a href="/faq/write" class="button">새 FAQ 작성</a>
        <a href="/" class="button">홈페이지로 가기</a>
    </div>
</div>
</body>
</html>
